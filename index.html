<!doctype html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="/CSS/index.css">
    <title>Caitlins App</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <script type="text/javascript">
        $(document).ready(() => {

            $.ajax({
                url: '/lowincomebyzip',
                type: 'GET',
                dataType: 'json',
                success: function (data) {

               $('#tBody').html(JSON.stringify(data));

/*                    drawTable(JSON.stringify(data));
                    drawTable(data)
                    console.log(data);*/

                }

            });

        });


        function drawTable(data) {
           var rows = [];

            for (var i = 0; i < data.length; i++) {
                rows.push(drawRow(data[i]));
            }

            $("#tab1").append(rows);
        }

        function drawRow(rowData) {
            const row = $("<tr />");
            row.append($("<td>" + rowData.facility_name + "</td>"));
            row.append($("<td>" + rowData.city + "</td>"));
            row.append($("<td>" + rowData.state + "</td>"));
            row.append($("<td>" + rowData.address + "</td>"));
            row.append($("<td>" + rowData.zipcode + "</td>"));
            row.append($("<td>" + rowData.hospital_overall_rating + "</td>"));
            row.append($("<td>" + rowData.pop_twentysixteen + "</td>"));

            return row;
        }

    </script>
</head>
<body>
<h2>Hospital Data</h2>
<div id="infotables" class="infotables"></div>
<br>
<table id ="tableone" class ="table">
    <caption>Data Table: Low Income and Low Hospital Rating</caption>
    <thead>
    <tbody>
    <tr>
        <th>Facility Name</th>
        <th>City</th>
        <th>State</th>
        <th>Address</th>
        <th>Zipcode</th>
        <th>Hospital Rating</th>
        <th>Population</th>
    </tr>
    </thead>
    </tbody>
</table>
<script type="text/javascript" src="/index.js">

    const rankingsBody = document.querySelector("#tableone > tbody")

    ///console.log(rankingsBody);

    function loadRankings () {
        const request = new XMLHttpRequest();

        request.open("get", "http://localhost:8080/lowincomebyzip");

        request.onload = () => {

            const json = json.parse(request.responseText);



        }
    }


</script>
</body>
</html>